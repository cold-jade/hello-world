!function(){function t(t){var n=document.createDocumentFragment(),r=0;t.forEach(function(o,a){var c=document.createElement("div"),s=new Image;c.className="box",s.src=o,c.appendChild(s),n.appendChild(c),s.onload=function(){e(s),++i.total,++r==t.length&&(i.busy=!1)}}),i.container.append(n),i.busy=!0}function e(t){var e=n(),o=i.w*e,a=i.heightArr[e];$(t).parent().css({top:a,left:o,width:i.w}),i.heightArr[e]+=$(t).parent().outerHeight(),i.container.height(i.heightArr[r()])}function n(){var t=i.heightArr[0],e=0;return i.heightArr.forEach(function(n,r){n<t&&(t=n,e=r)}),e}function r(){var t=i.heightArr[0],e=0;return i.heightArr.forEach(function(n,r){n>=t&&(t=n,e=r)}),e}var o=["assets/img/wf-1.jpg","assets/img/wf-2.jpg","assets/img/wf-3.jpg","assets/img/wf-4.jpg","assets/img/wf-5.jpg","assets/img/wf-6.jpg","assets/img/wf-7.jpg"],i={container:$(".waterfall-container"),col:0,w:200,heightArr:[],busy:!1,total:0},a=i.container.width();i.col=a<480?1:a<960?3:6,i.w=parseInt(a/i.col);for(var c=0;c<i.col;c++)i.heightArr[c]=0;i.container.width(a),$(document).bind("scroll",function(e){if(!i.busy){var n=i.container.offset().top+i.container.height();document.body.scrollTop+document.body.clientHeight>=n&&(console.log(i.total),t(o))}}),t(o)}();